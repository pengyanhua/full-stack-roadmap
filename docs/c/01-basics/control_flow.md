# control flow.c

::: info æ–‡ä»¶ä¿¡æ¯
- ğŸ“„ åŸæ–‡ä»¶ï¼š`02_control_flow.c`
- ğŸ”¤ è¯­è¨€ï¼šc
:::

## å®Œæ•´ä»£ç 

```c
// ============================================================
//                      æµç¨‹æ§åˆ¶
// ============================================================
// C çš„æµç¨‹æ§åˆ¶ä¸å¤§å¤šæ•°è¯­è¨€ç›¸åŒï¼šif/elseã€switchã€forã€while
// C ç‰¹æœ‰ï¼šgoto è¯­å¥ï¼ˆå¯ç”¨äºè·³å‡ºå¤šå±‚åµŒå¥—ï¼Œéœ€è°¨æ…ä½¿ç”¨ï¼‰
// æ¡ä»¶è¡¨è¾¾å¼ï¼š0 ä¸ºå‡ï¼Œä»»æ„é 0 å€¼ä¸ºçœŸ

#include <stdio.h>
#include <stdbool.h>

int main(void) {
    printf("=== æ¡ä»¶è¯­å¥ ===\n");

    // ----------------------------------------------------------
    // 1. if / else if / else
    // ----------------------------------------------------------
    int score = 85;

    if (score >= 90) {
        printf("ä¼˜ç§€\n");
    } else if (score >= 80) {
        printf("è‰¯å¥½\n");       // å‘½ä¸­æ­¤åˆ†æ”¯
    } else if (score >= 60) {
        printf("åŠæ ¼\n");
    } else {
        printf("ä¸åŠæ ¼\n");
    }

    // ä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆæ¡ä»¶è¡¨è¾¾å¼ï¼‰
    const char *result = (score >= 60) ? "é€šè¿‡" : "æœªé€šè¿‡";
    printf("ç»“æœ: %s\n", result);

    // C ä¸­ä»»ä½•é 0 å€¼éƒ½æ˜¯çœŸ
    int x = 5;
    if (x)       printf("x éé›¶ï¼ˆçœŸï¼‰\n");
    if (!0)      printf("!0 ä¸ºçœŸ\n");
    if (x > 3)   printf("x > 3\n");

    // ----------------------------------------------------------
    // 2. switch è¯­å¥
    // ----------------------------------------------------------
    printf("\n=== switch ===\n");

    int day = 3;
    switch (day) {
        case 1:
            printf("å‘¨ä¸€\n");
            break;  // å¿…é¡» breakï¼Œå¦åˆ™ä¼šè´¯ç©¿ï¼ˆfall-throughï¼‰
        case 2:
            printf("å‘¨äºŒ\n");
            break;
        case 3:
        case 4:
        case 5:
            // å¤šä¸ª case å…±äº«åŒä¸€å¤„ç†é€»è¾‘
            printf("å·¥ä½œæ—¥ï¼ˆç¬¬ %d å¤©ï¼‰\n", day);
            break;
        case 6:
        case 7:
            printf("å‘¨æœ«\n");
            break;
        default:
            printf("æ— æ•ˆ\n");
    }

    // ã€ç‰¹æ€§ã€‘æœ‰æ„ä¸ºä¹‹çš„è´¯ç©¿ï¼ˆfall-throughï¼‰
    printf("\nè´¯ç©¿ç¤ºä¾‹ï¼ˆcase 1 -> 2 -> 3ï¼‰:\n");
    int val = 1;
    switch (val) {
        case 1: printf("  case 1\n"); /* æ•…æ„ä¸ break */
        case 2: printf("  case 2\n"); /* æ•…æ„ä¸ break */
        case 3: printf("  case 3\n"); break;
        default: printf("  default\n");
    }

    // ----------------------------------------------------------
    // 3. for å¾ªç¯
    // ----------------------------------------------------------
    printf("\n=== for å¾ªç¯ ===\n");

    // æ ‡å‡† for å¾ªç¯
    for (int i = 0; i < 5; i++) {
        printf("%d ", i);
    }
    printf("\n");

    // å€’åº
    for (int i = 5; i > 0; i--) {
        printf("%d ", i);
    }
    printf("\n");

    // æ­¥é•¿ä¸º 2
    for (int i = 0; i <= 10; i += 2) {
        printf("%d ", i);
    }
    printf("\n");

    // åµŒå¥—å¾ªç¯ï¼ˆä¹ä¹ä¹˜æ³•è¡¨ï¼‰
    printf("\nä¹ä¹ä¹˜æ³•è¡¨:\n");
    for (int i = 1; i <= 9; i++) {
        for (int j = 1; j <= i; j++) {
            printf("%dÃ—%d=%-3d", j, i, i * j);
        }
        printf("\n");
    }

    // ----------------------------------------------------------
    // 4. while å¾ªç¯
    // ----------------------------------------------------------
    printf("\n=== while ===\n");

    int n = 1;
    while (n <= 5) {
        printf("%d ", n++);  // n++ åç½®é€’å¢
    }
    printf("\n");

    // æ— é™å¾ªç¯ï¼ˆå¸¸è§äºåµŒå…¥å¼/æœåŠ¡å™¨ï¼‰
    // while (1) { ... }  // æˆ– for (;;) { ... }

    // ----------------------------------------------------------
    // 5. do-while å¾ªç¯ï¼ˆè‡³å°‘æ‰§è¡Œä¸€æ¬¡ï¼‰
    // ----------------------------------------------------------
    printf("\n=== do-while ===\n");

    int m = 0;
    do {
        printf("%d ", m);
        m++;
    } while (m < 3);
    printf("\n");

    // ã€ç”¨é€”ã€‘ç”¨äºéœ€è¦å…ˆæ‰§è¡Œååˆ¤æ–­çš„åœºæ™¯ï¼ˆå¦‚èœå•é€‰æ‹©ï¼‰
    // do {
    //     printf("è¯·é€‰æ‹©ï¼ˆ1-3ï¼‰: ");
    //     scanf("%d", &choice);
    // } while (choice < 1 || choice > 3);

    // ----------------------------------------------------------
    // 6. break / continue / goto
    // ----------------------------------------------------------
    printf("\n=== break / continue ===\n");

    // breakï¼šè·³å‡ºå½“å‰å¾ªç¯
    for (int i = 0; i < 10; i++) {
        if (i == 5) break;
        printf("%d ", i);
    }
    printf("(break at 5)\n");

    // continueï¼šè·³è¿‡æœ¬æ¬¡è¿­ä»£
    for (int i = 0; i < 10; i++) {
        if (i % 2 == 0) continue;  // è·³è¿‡å¶æ•°
        printf("%d ", i);
    }
    printf("(å¥‡æ•°)\n");

    // break åªè·³å‡ºä¸€å±‚å¾ªç¯ï¼Œä½¿ç”¨æ ‡å¿—å˜é‡æˆ– goto è·³å‡ºå¤šå±‚
    printf("\nè·³å‡ºå¤šå±‚å¾ªç¯ï¼ˆä½¿ç”¨ gotoï¼‰:\n");
    bool found = false;
    for (int i = 0; i < 5 && !found; i++) {
        for (int j = 0; j < 5; j++) {
            if (i * j == 6) {
                printf("æ‰¾åˆ°ï¼š%d Ã— %d = 6\n", i, j);
                found = true;
                break;
            }
        }
    }

    // gotoï¼ˆC çš„ç‰¹æ®Šè·³è½¬ï¼Œé”™è¯¯å¤„ç†æ—¶å¸¸ç”¨ï¼‰
    printf("\ngoto ç¤ºä¾‹ï¼ˆèµ„æºæ¸…ç†æ¨¡å¼ï¼‰:\n");
    int *ptr = NULL;
    // æ¨¡æ‹Ÿåˆ†é…å¤±è´¥åœºæ™¯
    if (ptr == NULL) {
        printf("  åˆ†é…å¤±è´¥ï¼Œè·³åˆ°æ¸…ç†ä»£ç \n");
        goto cleanup;  // è·³è½¬åˆ° cleanup æ ‡ç­¾
    }
    printf("  è¿™è¡Œä¸ä¼šæ‰§è¡Œ\n");

cleanup:
    printf("  æ‰§è¡Œæ¸…ç†æ“ä½œï¼ˆgoto ç›®æ ‡ï¼‰\n");
    // åœ¨å®é™…ä»£ç ä¸­è¿™é‡Œé‡Šæ”¾èµ„æºï¼šfree(ptr);

    // ----------------------------------------------------------
    // 7. é€»è¾‘è¿ç®—ç¬¦
    // ----------------------------------------------------------
    printf("\n=== é€»è¾‘è¿ç®—ç¬¦ ===\n");

    int age = 25;
    bool has_id = true;

    // && (AND)ã€|| (OR)ã€! (NOT)
    if (age >= 18 && has_id) {
        printf("å¯ä»¥å…¥åœº\n");
    }

    // çŸ­è·¯æ±‚å€¼ï¼š&& å·¦ä¾§ä¸ºå‡æ—¶å³ä¾§ä¸æ‰§è¡Œï¼Œ|| å·¦ä¾§ä¸ºçœŸæ—¶å³ä¾§ä¸æ‰§è¡Œ
    int divisor = 0;
    if (divisor != 0 && 10 / divisor > 2) {
        printf("æ¡ä»¶æˆç«‹\n");
    } else {
        printf("å®‰å…¨é¿å…äº†é™¤é›¶ï¼ˆçŸ­è·¯æ±‚å€¼ï¼‰\n");
    }

    // ä½è¿ç®—ç¬¦ï¼ˆä½œç”¨äºæ•´æ•°çš„æ¯ä¸€ä½ï¼‰
    printf("\n=== ä½è¿ç®— ===\n");
    unsigned int flags = 0;
    unsigned int FLAG_READ    = 0x01;  // 0001
    unsigned int FLAG_WRITE   = 0x02;  // 0010
    unsigned int FLAG_EXECUTE = 0x04;  // 0100

    flags |= FLAG_READ | FLAG_WRITE;  // è®¾ç½®ä½ï¼šOR
    printf("è®¾ç½®è¯»å†™æƒé™: 0x%02X\n", flags);

    if (flags & FLAG_READ) printf("å¯è¯»\n");
    if (flags & FLAG_WRITE) printf("å¯å†™\n");
    if (!(flags & FLAG_EXECUTE)) printf("ä¸å¯æ‰§è¡Œ\n");

    flags &= ~FLAG_WRITE;  // æ¸…é™¤ä½ï¼šAND NOT
    printf("æ¸…é™¤å†™æƒé™å: 0x%02X\n", flags);

    flags ^= FLAG_EXECUTE;  // ç¿»è½¬ä½ï¼šXOR
    printf("ç¿»è½¬æ‰§è¡Œä½: 0x%02X\n", flags);

    // ç§»ä½è¿ç®—
    printf("\nç§»ä½è¿ç®—:\n");
    int a = 1;
    printf("1 << 3 = %dï¼ˆä¹˜ä»¥8ï¼‰\n", a << 3);
    printf("16 >> 2 = %dï¼ˆé™¤ä»¥4ï¼‰\n", 16 >> 2);

    printf("\n=== æµç¨‹æ§åˆ¶æ¼”ç¤ºå®Œæˆ ===\n");
    return 0;
}
```
