# 数组 (Array)

## 概念

数组是一种**线性数据结构**，将相同类型的元素存储在**连续的内存空间**中。

```
内存布局：
┌─────┬─────┬─────┬─────┬─────┐
│  10 │  20 │  30 │  40 │  50 │
└─────┴─────┴─────┴─────┴─────┘
  [0]   [1]   [2]   [3]   [4]
   ↑
 基地址 (base address)

地址计算：
element_address = base_address + index × element_size
```

## 特点

| 特点 | 说明 |
|------|------|
| 连续存储 | 元素在内存中紧密排列 |
| 随机访问 | 通过索引 O(1) 访问任意元素 |
| 固定大小 | 静态数组大小固定，动态数组可扩容 |
| 类型一致 | 所有元素类型相同（强类型语言） |

## 时间复杂度

| 操作 | 平均 | 最坏 | 说明 |
|------|------|------|------|
| 访问 | O(1) | O(1) | 直接通过索引计算地址 |
| 搜索 | O(n) | O(n) | 需要遍历（无序数组） |
| 搜索（有序） | O(log n) | O(log n) | 二分查找 |
| 插入（末尾） | O(1) | O(n) | 可能触发扩容 |
| 插入（任意位置） | O(n) | O(n) | 需要移动后续元素 |
| 删除（末尾） | O(1) | O(1) | 直接删除 |
| 删除（任意位置） | O(n) | O(n) | 需要移动后续元素 |

## 空间复杂度

- 存储：O(n)
- 动态数组扩容时临时需要 O(n) 额外空间

## 动态数组扩容机制

```
初始容量: 4
┌───┬───┬───┬───┐
│ 1 │ 2 │ 3 │ 4 │  ← 已满
└───┴───┴───┴───┘

添加第5个元素，触发扩容（通常 2 倍）:
┌───┬───┬───┬───┬───┬───┬───┬───┐
│ 1 │ 2 │ 3 │ 4 │ 5 │   │   │   │  ← 新容量: 8
└───┴───┴───┴───┴───┴───┴───┴───┘

扩容策略：
- Python list: 约 1.125 倍
- Java ArrayList: 1.5 倍
- Go slice: < 1024 时 2 倍，之后 1.25 倍
```

## 插入操作图解

```
在索引 2 处插入元素 99:

Step 1: 原数组
┌────┬────┬────┬────┬────┐
│ 10 │ 20 │ 30 │ 40 │    │
└────┴────┴────┴────┴────┘
  [0]  [1]  [2]  [3]  [4]

Step 2: 后移元素
┌────┬────┬────┬────┬────┐
│ 10 │ 20 │    │ 30 │ 40 │  ← 30, 40 后移
└────┴────┴────┴────┴────┘

Step 3: 插入新元素
┌────┬────┬────┬────┬────┐
│ 10 │ 20 │ 99 │ 30 │ 40 │  ← 插入 99
└────┴────┴────┴────┴────┘
```

## 删除操作图解

```
删除索引 1 的元素:

Step 1: 原数组
┌────┬────┬────┬────┬────┐
│ 10 │ 20 │ 30 │ 40 │ 50 │
└────┴────┴────┴────┴────┘
  [0]  [1]  [2]  [3]  [4]
        ↑
      删除

Step 2: 前移元素
┌────┬────┬────┬────┬────┐
│ 10 │ 30 │ 40 │ 50 │    │  ← 30, 40, 50 前移
└────┴────┴────┴────┴────┘
  [0]  [1]  [2]  [3]  [4]
```

## 适用场景

**适合使用数组：**
- ✅ 需要频繁随机访问元素
- ✅ 数据大小固定或变化不频繁
- ✅ 需要在末尾添加/删除元素
- ✅ 内存空间敏感（无额外指针开销）

**不适合使用数组：**
- ❌ 频繁在中间插入/删除
- ❌ 数据大小变化剧烈
- ❌ 需要频繁扩容

## 常见变体

| 变体 | 特点 |
|------|------|
| 静态数组 | 大小固定，编译时确定 |
| 动态数组 | 自动扩容（ArrayList, Vector, list） |
| 循环数组 | 首尾相连，用于实现循环队列 |
| 多维数组 | 矩阵、张量表示 |

## 相关算法题

| 难度 | 题目 | 核心技巧 |
|------|------|----------|
| 简单 | 两数之和 | 哈希表优化 |
| 简单 | 删除排序数组中的重复项 | 双指针 |
| 中等 | 三数之和 | 排序 + 双指针 |
| 中等 | 盛最多水的容器 | 双指针 |
| 困难 | 接雨水 | 动态规划/单调栈 |
| 中等 | 旋转数组 | 三次反转 |
| 简单 | 合并两个有序数组 | 逆向双指针 |

## 多语言对照

```python
# Python - list (动态数组)
arr = [1, 2, 3]
arr.append(4)      # 末尾添加
arr.insert(1, 10)  # 指定位置插入
arr.pop()          # 删除末尾
arr[0]             # 随机访问
```

```go
// Go - slice (动态数组)
arr := []int{1, 2, 3}
arr = append(arr, 4)        // 末尾添加
arr = append(arr[:1], append([]int{10}, arr[1:]...)...)  // 插入
arr = arr[:len(arr)-1]      // 删除末尾
arr[0]                      // 随机访问
```

```java
// Java - ArrayList (动态数组)
ArrayList<Integer> arr = new ArrayList<>();
arr.add(4);         // 末尾添加
arr.add(1, 10);     // 指定位置插入
arr.remove(arr.size() - 1);  // 删除末尾
arr.get(0);         // 随机访问
```
